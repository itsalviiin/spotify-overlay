import"./modulepreload-polyfill-B5Qt9EMX.js";const f=window.location.search,g=new URLSearchParams(f),r=g.get("code")||"",a="https://itsalviiin.github.io/spotify-overlay",s=`${a}/configure`;let l="",u="";document.getElementById("authorizeButton").addEventListener("click",_);document.getElementById("copyURLButton").addEventListener("click",h);function _(){const o=document.getElementById("client_id_box").value,e=document.getElementById("client_secret_box").value;localStorage.setItem("client_id",o),localStorage.setItem("client_secret",e);let t=`https://accounts.spotify.com/authorize?client_id=${o}&response_type=code&redirect_uri=${encodeURI(s)}&show_dialog=true&scope=user-read-private user-read-email user-modify-playback-state user-read-playback-position user-library-read streaming user-read-playback-state user-read-recently-played playlist-read-private`;window.location.href=t}r!=""?B(r):document.getElementById("connectBox").style.display="inline";async function B(o){const e=localStorage.getItem("client_id"),t=localStorage.getItem("client_secret");let p=`grant_type=authorization_code&code=${o}&redirect_uri=${encodeURI(s)}&client_id=${e}&client_secret=${t}`;const c=await fetch("https://accounts.spotify.com/api/token",{method:"POST",headers:{Authorization:`Basic ${btoa(e+":"+t)}`,"Content-Type":"application/x-www-form-urlencoded"},body:p});if(c.ok){const i=await c.json();l=i.refresh_token,i.access_token,u=`${a}?client_id=${e}&client_secret=${t}&refresh_token=${l}`,document.getElementById("authorizationBox").style.display="inline"}}const y=document.getElementById("client_id_box"),m=document.getElementById("client_secret_box"),d=document.getElementById("authorizeButton");function n(){y.value.trim()===""||m.value.trim()===""?d.disabled=!0:d.disabled=!1}y.addEventListener("input",n);m.addEventListener("input",n);n();function h(){navigator.clipboard.writeText(u),document.getElementById("copyURLButton").innerText="Copied to Clipboard",document.getElementById("copyURLButton").style.backgroundColor="#00dd63",document.getElementById("copyURLButton").style.color="#ffffff",setTimeout(()=>{document.getElementById("copyURLButton").innerText="Click to Copy URL",document.getElementById("copyURLButton").style.backgroundColor="#ffffff",document.getElementById("copyURLButton").style.color="#181818"},1e4)}
